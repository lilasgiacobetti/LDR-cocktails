<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recette</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* ==== RECETTE — layout ==== */
    :root{
      --bg:#F4E7DF; --bg2:#FAF4EF; --ink:#111; --muted:#5f5f5f;
      --card:#f0e6df; --border:#e5d9d1; --shadow:0 10px 18px rgba(0,0,0,.08);
      --accent:#7b2530;
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;padding:0;background:linear-gradient(180deg,var(--bg2),var(--bg));color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial
    }

    .recipe-wrap{max-width:1100px;margin:28px auto;padding:0 16px}
    .recipe-top{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .recipe-back{appearance:none;border:1px solid #e6e0dc;background:#fff;border-radius:999px;padding:6px 12px;font-size:.9rem;cursor:pointer}
    .recipe-eyebrow{letter-spacing:.12em;text-transform:uppercase;font-weight:700;font-size:12px;color:#6b6b6b;margin:0}
    .recipe-title{font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;font-weight:800;
      font-size:clamp(28px,4.8vw,56px);line-height:1.06;margin:2px 0 0}

    .recipe-two-col{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:start;margin-top:16px}
    .recipe-visual{
      border-radius:20px;overflow:hidden;background:#f3eee9; box-shadow:0 12px 38px rgba(0,0,0,.12)
    }
    .recipe-visual img{display:block;width:100%;height:100%;object-fit:cover;max-height:min(72vh,720px)}

    .recipe-card{
      background:#fff;border:1.5px solid #e6e1db;border-radius:20px;
      padding:22px;box-shadow:0 10px 28px rgba(0,0,0,.10)
    }
    .recipe-card h2{
      font-size:clamp(18px,2.2vw,22px);margin:0 0 8px;font-weight:800;letter-spacing:.02em
    }
    .recipe-list{margin:0;padding-left:18px;line-height:1.55}
    .recipe-section{margin-top:18px}
    .recipe-actions{margin-top:18px}
    .btn{appearance:none;border:none;border-radius:999px;padding:10px 16px;cursor:pointer}
    .btn-primary{background:#702632;color:#fff}

    .recipe-caption{opacity:.6;font-size:.9rem;margin-top:6px}

    @media (max-width: 860px){
      .recipe-two-col{grid-template-columns:1fr;gap:16px}
      .recipe-visual img{max-height:52vh}
    }
  </style>
</head>
<body>
  <main class="recipe-wrap" aria-live="polite">
    <div class="recipe-top">
      <button class="recipe-back" type="button" id="backBtn">← Retour au quiz</button>
      <div>
        <p class="recipe-eyebrow">Recette</p>
        <h1 class="recipe-title" id="recipeTitle">—</h1>
      </div>
    </div>

    <section class="recipe-two-col">
      <!-- Image à gauche (sous le titre & bouton) -->
      <figure class="recipe-visual">
        <img id="recipeImg" alt="Photo du cocktail" src="img/placeholder-recipe.jpg" />
      </figure>

      <!-- Carte à droite -->
      <article class="recipe-card">
        <div class="recipe-section">
          <h2>Ingrédients</h2>
          <ul id="ingredients" class="recipe-list"><li>Chargement…</li></ul>
        </div>

        <div class="recipe-section">
          <h2>Préparation</h2>
          <p id="instructions">Chargement…</p>
        </div>

        <div class="recipe-actions">
          <button class="btn btn-primary" id="againBtn">Recommencer</button>
        </div>
      </article>
    </section>
  </main>

<script>
  // Utils
  const norm = s => (s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase().replace(/\s+/g,' ').trim();
  const slug  = s => norm(s).replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');

  // Données
  const RECIPES = {/* === tes recettes inchangées === */ 
    "Tangy Tonic":{"ingredients":"- 150 ml Double Dutch Indian Tonic Water\n- 40 ml de jus de pamplemousse rose \n- 15 ml de sirop de sucre de grenadine","preparation":"1. Dans un verre highball rempli de glace pilée, ajouter les ingrédients.\n2. Décorer avec une rondelle de pamplemousse."},
    "Virgin Bellini":{"ingredients":"- 60 ml de jus/ purée de pêche\n- 10 ml de jus de citron frais \n- 100 ml de Double Dutch Skinny Tonic","preparation":"1. Dans un verre highball rempli de glace pilée, ajouter les ingrédients.\n2. Décorer avec un quartier de pêche (option)."},
    "Virgin To":{"ingredients":"- 30 ml de Tanqueray 0.0%\n- 120 ml d’Indian Tonic Water\n- Rondelle de pamplemousse frais","preparation":"1. Ajouter le Tanqueray 0.0% et le tonic dans un verre coppa rempli de glaçons.\n2. Décorer avec une rondelle de pamplemousse."},
    "Ginger Lime":{"ingredients":"- 150 ml Double Dutch Ginger Beer\n- 20 ml jus de citron\n- 15 ml de sirop de sucre de canne ","preparation":"1. Dans un verre highball rempli de glace pilée, ajouter les ingrédients.\n2. Décorer avec une rondelle de citron."},
    "Pa-no-ma":{"ingredients":"- 25 ml de jus de pamplemousse\n- 15 ml jus de citron vert frais\n- 1/2 piment (légèrement écrasé pour libérer les arômes)\n- Double Dutch Pink Grapefruit\n- Une tranche de pamplemousse","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter le jus de citron vert, jus de pamplemousse et le demi-piment, puis shaker.\n3. Compléter avec du Double Dutch Pink Grapefruit.\n4. Décorer avec une tranche de pamplemousse rose."},
    "Med Orchard":{"ingredients":"- 15 ml de sirop de mûres\n- 10 ml jus de citron\n- 20 ml de jus de pomme\n- 150 ml de Double Dutch Pomegranate & Basil\n- Garnir de 5 mûres","preparation":"1. Remplir le verre à highball de glaçons.\n2. Ajouter le sirop de mûre, le jus de citron et le jus de pomme.\n3. Compléter avec du Double Dutch Pomegranate & Basil.\n4. Décorer avec quelques mûres."},
    "Cucumber Collins":{"ingredients":"- 50 ml de Tanqueray 0.0%\n- 20 ml de jus de citron\n- 10 ml de sirop de sucre\n- Tonic cucumber & watermelon Double Dutch\n- Lamelle de concombre et zeste de citron","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter le Tanqueray 0.0%, le jus de citron et le sirop de sucre, puis shaker.\n3. Servir dans un verre highball avec des glaçon et les lamelles de concombres. Compléter avec du Double Dutch Cucumber & Watermelon Double Dutch.\n4. Décorer le verre avec le zeste de citron."},
    "Ginger spice":{"ingredients":"- 50 ml de Captain Morgan 0.0%\n- Jus de citron vert\n- Tonic Cranberry & Ginger Double Dutch\n- Cranberries fraîche et tranche de gingembre","preparation":"1. Remplir le verre de glaçons. Verser le Captain Morgan 0.0%.\n2. Presser un citron vert frais.\n3. Allonger avec du Double Dutch Cranberry & Ginger. Remuer délicatement à l’aide d’une cuillière. \n4. Décorer de cranberries et de gingembre."},
    "Sevilla Spritz":{"ingredients":"- 30 ml de gin Tanqueray Flor de Sevilla\n- 45 ml jus d’orange\n- 45 ml Prosecco\n- 100 ml de Tonic\n- Rondelle d’orange","preparation":"1. Ajouter tous les ingrédients dans un verre coppa rempli de glaçons.\n2. Décorer avec une rondelle d’orange."},
    "Tropical Fizz":{"ingredients":"- 40 ml de Captain Morgan Spiced Gold\n- 80 ml de jus d’ananas bien frais\n- 20 ml de sirop de passion\n- Eau gazeuse","preparation":"1. Dans un shaker rempli de glaçons, verse le Captain Morgan, le jus d’ananas et le sirop de passion. Shaker.\n2. Verser dans un verre rempli de glaçons.\n3. Allonger avec un trait d’eau gazeuse. "},
    "Gin to":{"ingredients":"- 40 ml de gin Tanqueray London Dry\n- 200 ml d’Indian Tonic Water\n- Un quartier de citron\n- Rondelle de citron","preparation":"1. Ajouter le gin et le tonic dans un verre coppa rempli de glaçons.\n2. Presser un quartier de citron. Décorer avec une rondelle de citron."},
    "Martini":{"ingredients":"- 30 ml Vodka Smirnoff Red\n- 7 ml de vermouth sec\n- Twist de citron\n- Une olive","preparation":"1. Dans un shaker rempli de glaçons, verser la vodka Smirnoff et le vermouth.\n2. Shaker, puis servir en filtrant dans un grand verre à martini.\n3. Décorer d’une olive."},
    "Espresso Martini":{"ingredients":"- 30 ml Vodka Smirnoff Red\n- 20 ml Baileys expresso crème\n- 15 ml de sirop de sucre\n- Un espresso\n- 3 grains de café","preparation":"1. Dans un shaker rempli de glaçons, verser la vodka Smirnoff, la liqueur de café et l’espresso.\n2. Shaker, puis servir dans un grand verre à martini.\n3. Décorer de 3 grains de café."},
    "Irish Spice":{"ingredients":"- 50 ml de Whiskey Roe & CO\n- 150 ml Ginger Ale Double Dutch\n- Rondelle de citron","preparation":"1. Remplir le verre à whisky de glaçons.\n2. Ajouter le whiskey.\n3. Allonger avec du Ginger Ale Double Dutch.\n4. Décorer avec une rondelle de citron."},
    "Ginger Spice":{"ingredients":"- 50 ml de Captain Morgan\n- Jus de citron vert\n- Tonic Cranberry & Ginger Double Dutch\n- Cranberries fraîche et tranche de gingembre","preparation":"1. Remplir le verre de glaçons. Verser le Captain Morgan.\n2. Presser un citron vert frais.\n3. Allonger avec du Double Dutch Cranberry & Ginger. Remuer délicatement à l’aide d’une cuillière. \n4. Décorer de cranberries et de gingembre."},
    "Dutch Mule":{"ingredients":"- 50 ml de Vodka Ketel One\n- 15 ml de jus de citron\n- Ginger Beer Double Dutch\n- Rondelle de citron vert et quelques feuiles de menthe","preparation":"1. Remplir le verre mule de glaçons.\n2. Ajouter la vodka, le jus de citron et allonger le tout avec du Ginger Beer Double Dutch.\n3. Mélanger délicatement à l’aide d’une cuillière.\n4. Décorer avec une rondelle de citron vert et des feuilles de menthe."},
    "Pink citrus collins":{"ingredients":"- 40 ml de gin Tanqueray London Dry\n- 30 ml de jus de pamplemousse\n- 20 ml de jus de citron\n- 15 ml de sirop de sucre (ou sirop de grenadine pour accentuer la couleur rosée)\n- Double Dutch Pink Grapefruit","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter le gin, les jus de citron, pamplemousse et le sirop, puis shaker.\n3. Servir dans un grand verre rempli de glaçons, compléter avec du Double Dutch Pink Grapefruit.\n3. Décorer avec une tranche de pamplemousse rose."},
    "Grapefruit Sour":{"ingredients":"40 ml de vodka Smirnoff Red\n30 ml jus de pamplemousse frais\n20 ml sirop de sucre\nTranche de pamplemousse rose et d’un brin de romarin\nUn blanc d’oeuf ( optionnel)","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter la Smirnoff, le jus de pamplemousse, le sirop de sucre et le blanc d’oeuf (optionnel), puis shaker.\n3. Décorer avec une tranche de pamplemousse rose et d’un brin de romarin."},
    "Hurrican":{"ingredients":"- 50 ml de Captain Morgan\n- 60 ml  jus de fruit de la passion\n- 40 ml jus d’orange \n- 20 ml jus de citron vert frais\n- 10 ml sirop de grenadine","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter tous les ingrédients, puis shaker.\n3. Décorer avec une tranche d’orange."},
    "Margarita":{"ingredients":"- 50 ml tequila Don Julio Reposado\n- 20 ml jus de citron vert\n- 10 ml de sirop d’agave\n- Tonic Elderflower Double Dutch\n- Zeste de citron","preparation":"1. Secouer ensemble la tequila, le jus de citron vert et le sirop d’agave.\n2. Filter dans une coupe remplie de glace (bord salé en option).\n3. Allonger de Tonic Elderflower Double Dutch. Décorer avec un zeste de citron."},
    "Mai tai":{"ingredients":"50 ml Ron Zacapa 23\n20 ml jus de citron\n10 ml sirop d’orgeat\n10 ml liqueur d’abricot\nFeuille de menthe & rondelle de citron","preparation":"1. Verser tous les ingrédients dans un shaker.\n2. Shaker puis filtrer dans un verre highball rempli de glace pilée.\n3. Décorer avec une rondelle de citron vert et des feuilles de menthe."},
    "Pimm’s lemonade":{"ingredients":"- 50 ml de Pimm’s No°1\n- 75 ml de limonade\n- 75 ml de Ginger Ale Double Dutch\n- 3 rondelles de concombre\n- 3 rondelles d’orange\n- Morceaux de fraise\n- Feuilles de menthe","preparation":"1. Remplir le verre highball de glaçon.\n2. Verser tous les ingrédients.\n3. Compléter avec la menthe, les fraise, l’orange et le concombre."},
    "Berry Fizz":{"ingredients":"- 40 ml de gin Tanqueray London Dry\n- 50 ml de purée de fruits rouges \n- 20 ml de jus de citron\n- Double Dutch Cranberry & Ginger","preparation":"1. Remplir le verre highball de glaçon.\n2. Verser tous les ingrédients. Mélanger délicatement avec une cuillière\n3. Décorer avec des fruits rouges."},
    "Cosmopolitan":{"ingredients":"- 40 ml de Vodka Ketel One\n- 20 ml de liqueur d’orange\n- 10 ml de jus de citron vert\n- 30 ml jus de canneberge","preparation":"1. Dans un shaker rempli de glaçons.\n2. Ajouter tous les ingrédients, puis shaker.\n3. Verser dans un verre à Martini. Garnir d’un zeste de citron."},
    "Mojito":{"ingredients":"- 50 ml de Captain Morgan\n- 1/2 citron vert coupé\n- 2 c.soupe de sucre de canne\n- 3 à 8 feuilles de menthe fraîche\n- Eau gazeuse","preparation":"1. Dans un grand verre, déposer le citron, le sucre et la menthe, et écraser le tout avec un pillon.\n2. Remplir le verre de glace pilée . Ajouter le Captain Morgan et mélanger doucement à la cuillère.\n3. Décorer avec un brin de menthe et une rondelle de citron vert."},
    "South side":{"ingredients":"- 50 ml de gin Gordon’s\n- 25 ml jus de citron\n- 15 ml de sirop de sucre\n- Eau gazeuse\n- Quartier de citron & romarin","preparation":"1. Dans un verre coppa rempli de glaçons, ajouter les ingrédients.\n2. Remuer avec une cuillière.\n3. Décorer avec un quartier de citron et branche de romarin ( optionnel)."},
    "Guayaba":{"ingredients":"- 40 ml de rhum Zacapa 23\n- 20 ml de liqueur de café\n- 20 ml jus de goyave\n- 2 traits d’orange amère","preparation":"1. Dans un shaker, ajouter tous les ingrédients. Shaker\n2. Verser le tout dans un verre coupette."},
    "boulevardier":{"ingredients":"- 20 ml Johnnie Walker Black Label\n- 20 ml de vermouth rouge\n- 20 ml de Bitter rouge\n- Twist d’orange","preparation":"1. Dans un shaker, ajouter tous les ingrédients. Shaker\n2. Verser le tout dans un verre à whisky.\n3. Décorer d’un twist d’orange ( optionnel)."},
    "Whisky Sour":{"ingredients":"- 50 ml de whisky Johnnie Walker Black Label\n- 20 ml jus de citron\n- 15 ml de sirop de sucre\n- 3 traits de bitter orange amère.\n- Un blanc d’oeuf (optionnel pour l’onctuosité)","preparation":"1. Dans un shaker, ajouter tous les ingrédients. Shaker\n2. Verser le tout dans un verre à whisky."},
    "Pistachio Martini":{"ingredients":"- 25 ml Baileys Original\n- 40 ml vodka Smirnoff Red\n- 2 boules de glaces à la pistache","preparation":"1. Dans un shaker, ajouter la glace à la pistache, la vodka et le Baileys. Shaker\n2. Verser le tout dans un verre à martini réfrigéré.\n3. Saupoudrer de framboise sechée ( optionnel)."},
    "Latte Speculos":{"ingredients":"- 1 c.soupe de pate à tartiner Spéculos\n- 2 espressos\n- Lait (végétal ou animal)\n- 50 ml de Baileys\n- Crème fouetté\n- Spéculos","preparation":"1. Mélanger la pâte à tartiner, les cafés, le Baileys et le lait.\n2. Ajouterde la crème fouetter sur le dessus.\n3. Décorer de morceaux de spéculos."},
    "Affogato":{"ingredients":"- 25 ml Baileys Original\n- Un espresso\n- 100 ml de glace vanille","preparation":"1. Remplir une tasse à cappucino de glace vanille. Utiliser un cuillière chaude pour creuser un puit au milieu.\n2. Faire couler un espresso.\n3. Suivi rapidement d’une touche crémeuse de liqueur Baileys."},
    "Irish coffee":{"ingredients":"- 40 ml de whiskey Roe & co\n- 80 ml de café noir\n- 20 ml de sirop de sucre\n- 30 ml de crème liquide entière ","preparation":"1. Dans un verre (resistant à la chaleur) ajouter le whiskey, le sirop de sucre et le café.\n2. Fouetter la crème pour la rendre liquide mais pas ferme.\n3. Verser la crème à l’aide d’une cuillière au-dessus du café (afin que les deux ne se mélangent pas)."},
    "Spicy martini":{"ingredients":"- 40 ml de Baileys Original\n- 30 ml de tequila Don Julio\n- 1 c.soupe de miel\n- Piments rouges long\n- 100 g de sucre\n- 100 ml d’eau","preparation":"1. Préparer le confit de piment. ( Faire chauffer l’eau et le sucre, jusqu’à obtention d’un sirop. Ajouter le ou les piments et laisser mijoter 15-20min à feu doux). Laisse refroidir hors du feu.\n2. Refroidir un verre à martini au congélateur. \n3. Dans un shaker rempli de glaçon, ajouter le Baileys, tequila et le miel (chaud pour une meilleure dissolution).\n4. Ajouter tous les ingrédients, puis shaker.\n5. Verser dans le verre à martini.\n6. Décorer avec le confit de piment."},
    "Matcha Latte":{"ingredients":"- 50 ml de Baileys Original\n- 2 cuillière à café de Matcha en poudre\n- 20 à 40 ml d’eau chaude ( environ 80°)\n- 150 ml de lait (végétal ou animal)","preparation":"1. Dans un petit bol, fouetter le matcha dans l’eau chaude.\n2. Dans un verre, faire mousser le lait (froid ou chaud).\n3. Assembler le matcha, le baileys et le lait dans le verre.\n4. Décorer avec une rondelle de citron vert et des feuilles de menthe."}
  };

  // Rendu
  (function render(){
    const qs = new URLSearchParams(location.search);
    const wanted = qs.get('name') || '';

    const titleEl = document.getElementById('recipeTitle');
    const ingEl   = document.getElementById('ingredients');
    const prepEl  = document.getElementById('instructions');
    const imgEl   = document.getElementById('recipeImg');

    const key = Object.keys(RECIPES).find(k => norm(k) === norm(wanted)) || Object.keys(RECIPES)[0];
    const rec = RECIPES[key];

    if (titleEl) titleEl.textContent = key;

    // Ingrédients
    const items = String(rec.ingredients || '')
      .replace(/[\u2028\u2029]/g,'\n')
      .split(/\r?\n|•|;|,/).map(s=>s.replace(/^[-–•\s]+/,'').trim()).filter(Boolean);
    ingEl.innerHTML = items.length ? items.map(i=>`<li>${i}</li>`).join('') : '<li>—</li>';

    // Préparation
    const rawPrep = String(rec.preparation || '').replace(/[\u2028\u2029]/g,'\n').replace(/\r\n?/g,'\n').trim();
    let parts = rawPrep.split(/\n+/).map(s=>s.replace(/^\s*\d+\.\s*/,'').trim()).filter(Boolean);
    if (parts.length <= 1) parts = rawPrep.split(/(?<=[\.!?])\s+/).map(s=>s.replace(/^\s*\d+\.\s*/,'').trim()).filter(Boolean);
    prepEl.innerHTML = parts.length <= 1 ? (parts[0] || '—') : parts.map((t,i)=>`${i+1}. ${t}`).join('<br>');

    // Image (jpg/png/webp -> placeholder -> emoji)
    const s = slug(key);
    const candidates = [`img/recipes/${s}.jpg`,`img/recipes/${s}.png`,`img/recipes/${s}.webp`];
    let i = 0;
    function showEmoji(){
      imgEl.style.display='none';
      const figure = imgEl.closest('.recipe-visual');
      let ph = document.getElementById('ph');
      if (!ph && figure){
        ph = document.createElement('div');
        ph.id='ph';
        ph.textContent='🍹';
        ph.style.cssText='position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:84px;color:#9a918a';
        figure.style.position='relative';
        figure.appendChild(ph);
      } else if (ph){ ph.style.display='flex'; }
    }
    imgEl.style.display='block';
    imgEl.onerror = ()=>{ i++; if (i<candidates.length) imgEl.src=candidates[i]; else { imgEl.onerror=()=>showEmoji(); imgEl.src='img/placeholder-recipe.jpg'; } };
    imgEl.onload = ()=>{ const ph=document.getElementById('ph'); if (ph) ph.style.display='none'; };
    imgEl.src = candidates[0];
    imgEl.alt = key;

    try { window.scrollTo({top:0, behavior:'smooth'}); } catch(e) {}
  })();

  // Boutons
  const QUIZ_URL = 'index.html';
  const backBtn  = document.getElementById('backBtn');
  const againBtn = document.getElementById('againBtn');
  backBtn.onclick  = ()=> document.referrer ? history.back() : location.assign(QUIZ_URL);
  againBtn.onclick = ()=> { localStorage.removeItem('selectedCocktail'); location.assign(QUIZ_URL); };
</script>
</body>
</html>
